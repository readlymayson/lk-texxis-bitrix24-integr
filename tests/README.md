# –¢–µ—Å—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ë–∏—Ç—Ä–∏–∫—Å24

–≠—Ç–æ—Ç –∫–∞—Ç–∞–ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ë–∏—Ç—Ä–∏–∫—Å24 —Å –ª–∏—á–Ω—ã–º –∫–∞–±–∏–Ω–µ—Ç–æ–º.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

### –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (`comprehensive_test.php`)
–ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞:
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ PHP —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –∫–ª–∞—Å—Å–æ–≤
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ API –∫–ª–∏–µ–Ω—Ç—ã (Bitrix24, –õ–ö)
- ‚úÖ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- ‚úÖ –ó–∞–ø—É—Å–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã (`test_integration.php`)
–ü—Ä–æ–≤–µ—Ä—è—é—Ç –æ—Å–Ω–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ webhook —Å–æ–±—ã—Ç–∏–π:
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –õ–ö
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å–∞

### –¢–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (`test_validation.php`)
–ü—Ä–æ–≤–µ—Ä—è—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥—è—â–∏—Ö webhook –∑–∞–ø—Ä–æ—Å–æ–≤:
- ‚úÖ –í–∞–ª–∏–¥–Ω—ã–π webhook –∑–∞–ø—Ä–æ—Å
- ‚úÖ –ù–µ–≤–µ—Ä–Ω—ã–π User-Agent
- ‚úÖ –ù–µ–≤–µ—Ä–Ω—ã–π Content-Type
- ‚úÖ –ù–µ–≤–µ—Ä–Ω—ã–π JSON
- ‚úÖ –ü—É—Å—Ç–æ–µ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏

### Edge Cases (`test_edge_cases.php`)
–¢–µ—Å—Ç–∏—Ä—É—é—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤:
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–µ —Å–æ–±—ã—Ç–∏–µ
- ‚úÖ –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π ID —Å—É—â–Ω–æ—Å—Ç–∏
- ‚úÖ –ü—É—Å—Ç—ã–µ –ø–æ–ª—è
- ‚úÖ –°–∏–º—É–ª—è—Ü–∏—è –æ—à–∏–±–∫–∏ API –õ–ö
- ‚úÖ –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –í–ª–æ–∂–µ–Ω–Ω—ã–π ID —Å—É—â–Ω–æ—Å—Ç–∏

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
```bash
php run_all_tests.php
```

### –ó–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
```bash
# –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
php comprehensive_test.php

# –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
php test_integration.php

# –¢–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
php test_validation.php

# Edge cases
php test_edge_cases.php
```

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ bash —Å–∫—Ä–∏–ø—Ç
```bash
./run_tests.sh
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```
========================================
–ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢ –ü–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ
========================================

–¢–µ—Å—Ç                              | –í—Å–µ–≥–æ | –ü—Ä–æ–π–¥ | –°—Ç–∞—Ç—É—Å
-----------------------------------------------------------------
–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ          | 53    | ~46   | ‚úì/~
–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏         | 4     | 4     | ‚úì
–¢–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ webhook          | 6     | 6     | ‚úì
–¢–µ—Å—Ç—ã edge cases –∏ –æ—à–∏–±–æ–∫        | 7     | 7     | ‚úì
-----------------------------------------------------------------
–ò–¢–û–ì–û                            | 70    | ~63   | ‚úì/~

üéâ –û–°–ù–û–í–ù–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´ –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–´ –£–°–ü–ï–®–ù–û!
```

## –õ–æ–≥–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–í—Å–µ –ª–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `src/logs/`:
- `comprehensive_test_*.log` - –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `test_bitrix24_webhooks.log` - –ª–æ–≥–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- `test_validation.log` - –ª–æ–≥–∏ —Ç–µ—Å—Ç–æ–≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- `test_edge_cases.log` - –ª–æ–≥–∏ edge case —Ç–µ—Å—Ç–æ–≤
- `bitrix24_webhooks.log` - –æ—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã

## Mock –∫–ª–∞—Å—Å—ã

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è mock –∫–ª–∞—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–∏–º—É–ª–∏—Ä—É—é—Ç —Ä–∞–±–æ—Ç—É —Å API –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:

- `MockBitrix24API` - —Å–∏–º—É–ª–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å –ë–∏—Ç—Ä–∏–∫—Å24 API
- `MockLKAPI` - —Å–∏–º—É–ª–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å API –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
- `MockBitrix24APIValidation` - —Ñ–æ–∫—É—Å –Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ webhook
- `MockBitrix24APIEdge` - –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è edge cases

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `tests/`
2. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –º–∞—Å—Å–∏–≤
3. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –ª–æ–≥–∏–∫—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
4. –î–æ–±–∞–≤—å—Ç–µ —Ñ–∞–π–ª –≤ `run_all_tests.php` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ CI/CD

–ü—Ä–∏–º–µ—Ä –¥–ª—è GitHub Actions:
```yaml
- name: Run tests
  run: |
    cd tests
    php run_all_tests.php
```
