 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ë–∏—Ç—Ä–∏–∫—Å24 - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–µ–±—Ö—É–∫–æ–≤ –æ—Ç –ë–∏—Ç—Ä–∏–∫—Å24 –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö —Å –ª–∏—á–Ω—ã–º –∫–∞–±–∏–Ω–µ—Ç–æ–º –∫–ª–∏–µ–Ω—Ç–∞. –ü—Ä–æ–µ–∫—Ç –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—é—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –º–µ–∂–¥—É CRM –ë–∏—Ç—Ä–∏–∫—Å24 –∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞.

## üöÄ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–ü—Ä–æ–µ–∫—Ç—ã –∏ –º–µ–Ω–µ–¥–∂–µ—Ä—ã)

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

1. **–ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π –ø—Ä–æ–µ–∫—Ç–æ–≤ (Smart Processes)**
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è: –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è, –æ–±—ä–µ–∫—Ç, —Ç–∏–ø —Å–∏—Å—Ç–µ–º—ã, –º–µ—Å—Ç–æ–Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ, –¥–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, —Å—Ç–∞—Ç—É—Å, —Å–≤—è–∑—å —Å –∫–ª–∏–µ–Ω—Ç–æ–º

2. **–ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤**
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è: –∏–º—è, —Ñ–∞–º–∏–ª–∏—è, email, —Ç–µ–ª–µ—Ñ–æ–Ω, –¥–æ–ª–∂–Ω–æ—Å—Ç—å, —Ñ–æ—Ç–æ

3. **API –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º–∏**
   - `user.get`, `user.list` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Bitrix24

4. **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ JSON —Ñ–∞–π–ª—ã
   - –ú–µ—Ç–æ–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤

5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±—Ö—É–∫–æ–≤**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–±—ã—Ç–∏–π `ONCRM_DYNAMIC_ITEM_UPDATE` –∏ `ONCRM_DYNAMIC_ITEM_ADD`
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –ø—Ä–æ–µ–∫—Ç–æ–≤

6. **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞**
   - –ù–æ–≤–∞—è —Å–µ–∫—Ü–∏—è "–ü—Ä–æ–µ–∫—Ç—ã (Smart Processes)" —Å —Ç–∞–±–ª–∏—Ü–µ–π –ø—Ä–æ–µ–∫—Ç–æ–≤
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–µ–Ω–µ–¥–∂–µ—Ä–µ –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
   - –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –ø—Ä–æ–µ–∫—Ç–æ–≤

### ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ID —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å–∞

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏ —á–µ—Ä–µ–∑ —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å ID —Ç–∏–ø–∞ —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ `src/config/bitrix24.php`:

```php
'bitrix24' => [
    // ... –¥—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ...
    'smart_process_id' => 1036, // ID –≤–∞—à–µ–≥–æ —Ç–∏–ø–∞ —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å–∞
],
```

–ì–¥–µ `1036` - —ç—Ç–æ ID –≤–∞—à–µ–≥–æ —Ç–∏–ø–∞ —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å–∞ –≤ Bitrix24. –£–∑–Ω–∞—Ç—å ID –º–æ–∂–Ω–æ:
- –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ Bitrix24: **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è ‚Üí –°–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å—ã**
- –í URL —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `.../crm/type/1036/...`)
- –ß–µ—Ä–µ–∑ API: –º–µ—Ç–æ–¥ `crm.type.list` –≤–µ—Ä–Ω–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å –∏—Ö ID

### üîó –ü—Ä–∏–≤—è–∑–∫–∞ —Å—É—â–Ω–æ—Å—Ç–µ–π –ø–æ bitrix_id

–í—Å–µ —Å—É—â–Ω–æ—Å—Ç–∏ (–∫–æ–Ω—Ç–∞–∫—Ç—ã, –∫–æ–º–ø–∞–Ω–∏–∏, –ø—Ä–æ–µ–∫—Ç—ã) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –ø–æ –∏—Ö `bitrix_id`:

- **–ö–æ–Ω—Ç–∞–∫—Ç—ã**: –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å `bitrix_id` –∫–∞–∫ –∫–ª—é—á. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏ –∏ –ø—Ä–æ–µ–∫—Ç—ã
- **–ö–æ–º–ø–∞–Ω–∏–∏**: –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å `bitrix_id` –∫–∞–∫ –∫–ª—é—á, –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ –∫–æ–Ω—Ç–∞–∫—Ç—É —á–µ—Ä–µ–∑ `CONTACT_ID` (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω)
- **–ü—Ä–æ–µ–∫—Ç—ã**: –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å `bitrix_id` –∫–∞–∫ –∫–ª—é—á, –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ –∫–ª–∏–µ–Ω—Ç–∞–º —á–µ—Ä–µ–∑ `contactId`

**–ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–∞:**
1. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–∞–∫—Ç–∞ –ª–æ–∫–∞–ª—å–Ω–æ
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –∫–æ–º–ø–∞–Ω–∏–π —Å `CONTACT_ID` —Ä–∞–≤–Ω—ã–º `bitrix_id` –∫–æ–Ω—Ç–∞–∫—Ç–∞
3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π –ª–æ–∫–∞–ª—å–Ω–æ
4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å `contactId` —Ä–∞–≤–Ω—ã–º `bitrix_id` –∫–æ–Ω—Ç–∞–∫—Ç–∞
5. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –ª–æ–∫–∞–ª—å–Ω–æ

–í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ JSON —Ñ–∞–π–ª–∞—Ö –±–µ–∑ –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ –≤–Ω–µ—à–Ω–∏–º API.

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã](#–æ–±–∑–æ—Ä-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)
2. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
3. [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-—Å–∏—Å—Ç–µ–º—ã)
4. [–ü—Ä–æ—Ü–µ—Å—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ë–∏—Ç—Ä–∏–∫—Å24](#–ø—Ä–æ—Ü–µ—Å—Å-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏-—Å-–±–∏—Ç—Ä–∏–∫—Å24)
5. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–∏-—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
6. [–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å](#–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
7. [–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥](#–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ-–∏-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
8. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)

---

## üèóÔ∏è –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

–°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –ø–æ –º–æ–¥—É–ª—å–Ω–æ–º—É –ø—Ä–∏–Ω—Ü–∏–ø—É –∏ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

- **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–µ–±—Ö—É–∫–æ–≤** (`src/webhooks/bitrix24.php`) - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –æ—Ç –ë–∏—Ç—Ä–∏–∫—Å24
- **API –∫–ª–∏–µ–Ω—Ç—ã** - –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ (–ë–∏—Ç—Ä–∏–∫—Å24 API, –õ–ö API)
- **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** - —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ JSON —Ñ–∞–π–ª–∞—Ö
- **–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è** - –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –¥–∞—à–±–æ—Ä–¥ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

```
–ë–∏—Ç—Ä–∏–∫—Å24 (CRM)
    ‚îÇ
    ‚îÇ Webhook —Å–æ–±—ã—Ç–∏—è
    ‚ñº
[–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–µ–±—Ö—É–∫–æ–≤] ‚Üí –í–∞–ª–∏–¥–∞—Ü–∏—è ‚Üí –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è
    ‚îÇ
    ‚îú‚îÄ‚Üí [Bitrix24API] ‚Üí –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–∏
    ‚îÇ
    ‚îî‚îÄ‚Üí [LocalStorage] ‚Üí –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ª–æ–∫–∞–ª—å–Ω–æ
         ‚îÇ
         ‚îî‚îÄ‚Üí [Logger] ‚Üí –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ bitrix24.php          # –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ classes/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EnvLoader.php         # –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ .env
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Logger.php            # –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Bitrix24API.php       # API –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–∏—Ç—Ä–∏–∫—Å24
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LKAPI.php             # API –∫–ª–∏–µ–Ω—Ç –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ LocalStorage.php      # –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö (JSON —Ñ–∞–π–ª—ã)
‚îÇ   ‚îú‚îÄ‚îÄ webhooks/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ bitrix24.php          # –û—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–µ–±—Ö—É–∫–æ–≤ –æ—Ç –ë–∏—Ç—Ä–∏–∫—Å24
‚îÇ   ‚îú‚îÄ‚îÄ data/                     # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contacts.json         # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ companies.json        # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deals.json            # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–¥–µ–ª–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ projects.json         # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã (—Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å—ã)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ managers.json         # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ logs/                     # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –ª–æ–≥–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ bitrix24_webhooks.log # –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥-—Ñ–∞–π–ª
‚îÇ   ‚îî‚îÄ‚îÄ examples.php              # –ü—Ä–∏–º–µ—Ä—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π
‚îú‚îÄ‚îÄ index.php                     # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
‚îú‚îÄ‚îÄ integration_dashboard.php     # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ .env                          # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è)
‚îú‚îÄ‚îÄ .env.example                  # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ install.bat                   # –°–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–ª—è Windows
‚îú‚îÄ‚îÄ install.sh                    # –°–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–ª—è Linux
‚îî‚îÄ‚îÄ start_server.sh               # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
```

---

## üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`src/config/bitrix24.php`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.

**–ß—Ç–æ —Å–æ–¥–µ—Ä–∂–∏—Ç:**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–∏—Ç—Ä–∏–∫—Å24 (webhook URL, —Ç–æ–∫–µ–Ω—ã, —Ç–∞–π–º–∞—É—Ç—ã)
- –ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π –º–µ–∂–¥—É –ë–∏—Ç—Ä–∏–∫—Å24 –∏ –ª–∏—á–Ω—ã–º –∫–∞–±–∏–Ω–µ—Ç–æ–º
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (—É—Ä–æ–≤–µ–Ω—å, —Ñ–∞–π–ª, –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π (–ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏, –∑–∞–¥–µ—Ä–∂–∫–∏)
- –ü—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

**–ö–ª—é—á–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

```php
'field_mapping' => [
    'contact' => [
        'lk_client_field' => 'UF_CRM_1763468430', // –ü–æ–ª–µ "–õ–ö –∫–ª–∏–µ–Ω—Ç–∞" –≤ –∫–æ–Ω—Ç–∞–∫—Ç–µ
        'lk_client_values' => ['46','3118'], // –î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è "–õ–ö –∫–ª–∏–µ–Ω—Ç–∞"
        'email' => 'EMAIL',
        'phone' => 'PHONE',
        'name' => 'NAME',
        'last_name' => 'LAST_NAME',
    ],
    'company' => [
        'title' => 'TITLE',
        'email' => 'EMAIL',
        'phone' => 'PHONE',
    ],
    // ...
]
```

**–í–∞–∂–Ω–æ:** –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —ç—Ç–æ—Ç –º–∞–ø–ø–∏–Ω–≥ –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

---

### 2. EnvLoader (`src/classes/EnvLoader.php`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ —Ñ–∞–π–ª–∞ `.env`.

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ —Ñ–∞–π–ª–∞ `.env` –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ª–æ–∫–∞—Ü–∏—è—Ö
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ `.env` —Ñ–∞–π–ª–µ
- –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ (boolean, integer)
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ `$_ENV`, `$_SERVER` –∏ —á–µ—Ä–µ–∑ `putenv()`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```php
EnvLoader::load(); // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
$value = EnvLoader::get('BITRIX24_WEBHOOK_URL', 'default');
$bool = EnvLoader::getBool('LOG_ENABLED', true);
$int = EnvLoader::getInt('BITRIX24_TIMEOUT', 30);
```

**–ó–∞—á–µ–º –Ω—É–∂–µ–Ω:** –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (—Ç–æ–∫–µ–Ω—ã, –∫–ª—é—á–∏ API) –≤–Ω–µ –∫–æ–¥–∞.

---

### 3. Logger (`src/classes/Logger.php`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å–∏—Å—Ç–µ–º—ã.

**–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**
- `DEBUG` - –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–¥–µ—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–æ–≤)
- `INFO` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (—É—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏)
- `WARNING` - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã)
- `ERROR` - –æ—à–∏–±–∫–∏ (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ó–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π UTF-8
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ (10MB)
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —É—Ä–æ–≤–Ω—é –≤–∞–∂–Ω–æ—Å—Ç–∏

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```php
$logger->info('Webhook received', [
    'event' => 'ONCRMCONTACTUPDATE',
    'contact_id' => 12345
]);
```

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** –í–æ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö —Å–∏—Å—Ç–µ–º—ã –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã –∏ –æ—Ç–ª–∞–¥–∫–∏.

---

### 4. Bitrix24API (`src/classes/Bitrix24API.php`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å REST API –ë–∏—Ç—Ä–∏–∫—Å24.

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

#### 4.1. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–µ–±—Ö—É–∫–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ User-Agent –∑–∞–≥–æ–ª–æ–≤–∫–∞ (–¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å "Bitrix24")
- –í–∞–ª–∏–¥–∞—Ü–∏—è Content-Type (JSON –∏–ª–∏ URL-encoded)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
- –ü–∞—Ä—Å–∏–Ω–≥ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞

#### 4.2. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
- `getEntityData($entityType, $entityId)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ–ª–µ–π —Å—É—â–Ω–æ—Å—Ç–∏ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –º–∞–ø–ø–∏–Ω–≥–∞
- `getEntityList($entityType, $filter, $select)` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å—É—â–Ω–æ—Å—Ç–µ–π
- `updateEntity($entityType, $entityId, $fields)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã —Å—É—â–Ω–æ—Å—Ç–µ–π:**
- `contact` - –∫–æ–Ω—Ç–∞–∫—Ç—ã (crm.contact.*)
- `company` - –∫–æ–º–ø–∞–Ω–∏–∏ (crm.company.*)
- `deal` - —Å–¥–µ–ª–∫–∏ (crm.deal.*)
- `smart_process` - —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å—ã (crm.item.*)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ API –º–µ—Ç–æ–¥–∞ –ø–æ —Ç–∏–ø—É —Å—É—â–Ω–æ—Å—Ç–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤ –∏ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ–∫–æ–º–ø—Ä–µ—Å—Å–∏—è –æ—Ç–≤–µ—Ç–æ–≤

**–ó–∞—á–µ–º –Ω—É–∂–µ–Ω:** –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π –∏–∑ –ë–∏—Ç—Ä–∏–∫—Å24, —Ç–∞–∫ –∫–∞–∫ –≤–µ–±—Ö—É–∫–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è.

---

### 5. LocalStorage (`src/classes/LocalStorage.php`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ JSON —Ñ–∞–π–ª–∞—Ö.

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**

#### 5.1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏
- `createLK($contactData)` - —Å–æ–∑–¥–∞–Ω–∏–µ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–∞
- `syncContact($lkId, $contactData)` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–∞–∫—Ç–∞
- `getContact($contactId)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ –ø–æ ID
- `getContactByEmail($email)` - –ø–æ–∏—Å–∫ –∫–æ–Ω—Ç–∞–∫—Ç–∞ –ø–æ email
- `getLastUpdatedContact()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞
- `getContactsSortedByUpdate($limit)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

#### 5.2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏—è–º–∏
- `syncCompany($lkId, $companyData)` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–∏
- `getCompany($companyId)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ –ø–æ ID
- `getAllCompanies()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–∞–Ω–∏–π

#### 5.3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∞–º–∏
- `addDeal($dealData)` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏
- `getAllDeals()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–¥–µ–ª–æ–∫

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:**

–ö–æ–Ω—Ç–∞–∫—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
```json
{
  "12345": {
    "id": "LK-1234567890-12345",
    "bitrix_id": "12345",
    "name": "–ò–≤–∞–Ω",
    "last_name": "–ü–µ—Ç—Ä–æ–≤",
    "email": "ivan@example.com",
    "phone": "+7 (999) 123-45-67",
    "status": "active",
    "created_at": "2025-01-18 14:30:00",
    "updated_at": "2025-01-18 15:45:00"
  }
}
```

**–ó–∞—á–µ–º –Ω—É–∂–µ–Ω:** 
- –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –±–µ–∑ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API
- –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞

---

### 6. LKAPI (`src/classes/LKAPI.php`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** API –∫–ª–∏–µ–Ω—Ç –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ª–∏—á–Ω—ã–º –∫–∞–±–∏–Ω–µ—Ç–æ–º (–≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è).

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- `createLK($contactData, $companyData)` - —Å–æ–∑–¥–∞–Ω–∏–µ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
- `updateLK($lkId, $contactData, $companyData)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
- `deleteLK($lkId)` - —É–¥–∞–ª–µ–Ω–∏–µ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
- `syncContact($lkId, $contactData)` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–∞
- `syncCompany($lkId, $companyData)` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–∞–Ω–∏–∏
- `syncProject($lkId, $projectData)` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π –∏–∑ –ë–∏—Ç—Ä–∏–∫—Å24 –≤ —Ñ–æ—Ä–º–∞—Ç –õ–ö
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ email –∏ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ –∏–∑ –º–∞—Å—Å–∏–≤–æ–≤ –ë–∏—Ç—Ä–∏–∫—Å24
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π (email –º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ —Å–∏—Å—Ç–µ–º—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `LocalStorage` –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ API –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

---

### 7. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–µ–±—Ö—É–∫–æ–≤ (`src/webhooks/bitrix24.php`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–ª–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –æ—Ç –ë–∏—Ç—Ä–∏–∫—Å24.

**–ü—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏:**

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞**
   - –ß—Ç–µ–Ω–∏–µ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ –∏–∑ `php://input`
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö HTTP –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
   - –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥—è—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞

2. **–í–∞–ª–∏–¥–∞—Ü–∏—è**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç–æ–¥–∞ –∑–∞–ø—Ä–æ—Å–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å POST)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ `Bitrix24API::validateWebhookRequest()`

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è**
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å–æ–±—ã—Ç–∏—è –∏ —Å—É—â–Ω–æ—Å—Ç–∏
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–∏ –∏–∑ –ë–∏—Ç—Ä–∏–∫—Å24 API
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è (create/update/delete)
   - –í—ã–∑–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞

4. **–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (–¥–æ 3 –ø–æ–ø—ã—Ç–æ–∫)
   - –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏: 5 —Å–µ–∫, 30 —Å–µ–∫, 300 —Å–µ–∫, 3600 —Å–µ–∫

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–æ–±—ã—Ç–∏—è:**

| –°–æ–±—ã—Ç–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—Ä–∞–±–æ—Ç—á–∏–∫ |
|---------|----------|------------|
| `ONCRMCONTACTUPDATE` | –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ | `handleContactUpdate()` |
| `ONCRMCONTACTADD` | –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ | `handleCreate()` |
| `ONCRMCONTACTDELETE` | –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ | `handleDelete()` |
| `ONCRMCOMPANYUPDATE` | –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ | `handleCompanyUpdate()` |
| `ONCRMCOMPANYADD` | –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ | `handleCreate()` |
| `ONCRMCOMPANYDELETE` | –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ | `handleDelete()` |
| `ONCRMDEALUPDATE` | –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏ | `handleDealUpdate()` |
| `ONCRMDEALADD` | –°–æ–∑–¥–∞–Ω–∏–µ —Å–¥–µ–ª–∫–∏ | `handleCreate()` |
| `ONCRM_DYNAMIC_ITEM_UPDATE` | –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å–∞ | `handleSmartProcessUpdate()` |

**–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π:**

#### 7.1. `handleContactUpdate()`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ–ø—É—Å—Ç–∏–º–æ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è "–õ–ö –∫–ª–∏–µ–Ω—Ç–∞" —á–µ—Ä–µ–∑ `isValidLKClientValue()`
- –ï—Å–ª–∏ –∫–æ–Ω—Ç–∞–∫—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è –¥–æ–ø—É—Å—Ç–∏–º–æ–µ - –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `syncContact()`
- –ï—Å–ª–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞ –Ω–µ—Ç –∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è –¥–æ–ø—É—Å—Ç–∏–º–æ–µ - —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —á–µ—Ä–µ–∑ `createLK()`
- –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ - –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –º–∞–ø–ø–∏–Ω–≥–∞ —á–µ—Ä–µ–∑ `getEntityData()`

#### 7.2. `handleCompanyUpdate()`
- –ü–æ–ª—É—á–∞–µ—Ç –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏ —á–µ—Ä–µ–∑ API
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `syncCompany()`

#### 7.3. `handleDealUpdate()`
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å–¥–µ–ª–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ `addDeal()`

#### 7.4. `handleSmartProcessUpdate()`
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–ø—Ä–æ–µ–∫—Ç–æ–≤)
- –ú–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ –õ–ö

**–ó–∞—á–µ–º –Ω—É–∂–µ–Ω:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π –æ—Ç –ë–∏—Ç—Ä–∏–∫—Å24 —Å –µ–¥–∏–Ω–æ–π –ª–æ–≥–∏–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫.

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ë–∏—Ç—Ä–∏–∫—Å24

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ (7,5% –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)

**–¢—Ä–∏–≥–≥–µ—Ä:** –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª—è "–õ–ö –∫–ª–∏–µ–Ω—Ç–∞" –≤ –∫–æ–Ω—Ç–∞–∫—Ç–µ –ë–∏—Ç—Ä–∏–∫—Å24.

**–ü—Ä–æ—Ü–µ—Å—Å:**

1. **–í –ë–∏—Ç—Ä–∏–∫—Å24:**
   - –ú–µ–Ω–µ–¥–∂–µ—Ä —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–æ–ª–µ "–õ–ö –∫–ª–∏–µ–Ω—Ç–∞" –≤ –æ–¥–Ω–æ –∏–∑ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `UF_CRM_1763468430 = "46"`)
   - –ë–∏—Ç—Ä–∏–∫—Å24 –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–µ–±—Ö—É–∫ `ONCRMCONTACTUPDATE`

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±—Ö—É–∫–∞:**
   ```
   –ë–∏—Ç—Ä–∏–∫—Å24 ‚Üí Webhook ‚Üí –í–∞–ª–∏–¥–∞—Ü–∏—è ‚Üí –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ–ª–µ–π –∫–æ–Ω—Ç–∞–∫—Ç–∞ –∏–∑ –º–∞–ø–ø–∏–Ω–≥–∞
   ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è "–õ–ö –∫–ª–∏–µ–Ω—Ç–∞" –Ω–∞ –¥–æ–ø—É—Å—Ç–∏–º–æ—Å—Ç—å
   ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –õ–ö –≤ LocalStorage (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –¥–æ–ø—É—Å—Ç–∏–º–æ–º –∑–Ω–∞—á–µ–Ω–∏–∏)
   ‚Üí –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
   ```

3. **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `src/data/contacts.json` (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è –¥–æ–ø—É—Å—Ç–∏–º–æ–µ)
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ (—Ñ–æ—Ä–º–∞—Ç: `LK-{timestamp}-{contact_id}`)
   - –î–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ

**–ö–æ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
```php
// –í handleContactUpdate()
$existingContact = $localStorage->getContact($contactId);

if ($existingContact) {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ–ø—É—Å—Ç–∏–º–æ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è –õ–ö –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
    if (isValidLKClientValue('contact', $contactData, $config, $logger)) {
        $localStorage->syncContact($existingContact['id'], $contactData);
    } else {
        $logger->info('Skipping contact update - invalid LK client field value');
    }
} else {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ–ø—É—Å—Ç–∏–º–æ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è –õ–ö –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º
    if (isValidLKClientValue('contact', $contactData, $config, $logger)) {
        $localStorage->createLK($contactData);
    } else {
        $logger->info('Skipping LK creation - invalid LK client field value');
    }
}
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (15% –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)

**–¢—Ä–∏–≥–≥–µ—Ä:** –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–∞–∫—Ç–∞, –∫–æ–º–ø–∞–Ω–∏–∏ –∏–ª–∏ —Å–¥–µ–ª–∫–∏ –≤ –ë–∏—Ç—Ä–∏–∫—Å24.

**–ü—Ä–æ—Ü–µ—Å—Å:**

1. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞:**
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ email, —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –∏–º–µ–Ω–∏ –≤ –ë–∏—Ç—Ä–∏–∫—Å24
   - –í–µ–±—Ö—É–∫ `ONCRMCONTACTUPDATE` ‚Üí –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö ‚Üí –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ LocalStorage

2. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏:**
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–∏ –≤ –ë–∏—Ç—Ä–∏–∫—Å24
   - –í–µ–±—Ö—É–∫ `ONCRMCOMPANYUPDATE` ‚Üí –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö ‚Üí –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ LocalStorage

3. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏:**
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞–¥–∏–∏ –∏–ª–∏ –¥–∞–Ω–Ω—ã—Ö —Å–¥–µ–ª–∫–∏
   - –í–µ–±—Ö—É–∫ `ONCRMDEALUPDATE` ‚Üí –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ LocalStorage

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª—É—á–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è —Å—É—â–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ API —Å–æ–≥–ª–∞—Å–Ω–æ –∫–æ–Ω—Ñ–∏–≥—É –º–∞–ø–ø–∏–Ω–≥–∞, –∞ –Ω–µ –≤—Å–µ –ø–æ–ª—è
- –≠—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–æ–ª–µ–π
- –ü–æ–ª—è –¥–ª—è –≤—ã–±–æ—Ä–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –≤ `field_mapping` –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏

**–ú–µ—Ö–∞–Ω–∏–∑–º –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫:**

1. –ü—Ä–∏ –æ—à–∏–±–∫–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏—è —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –ø–æ–ø—ã—Ç–∫—É
2. –ó–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏: 5 —Å–µ–∫ ‚Üí 30 —Å–µ–∫ ‚Üí 300 —Å–µ–∫ ‚Üí 3600 —Å–µ–∫
3. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫: 3 (–≤—Å–µ–≥–æ 4 –ø–æ–ø—ã—Ç–∫–∏)

**–¢–∏–ø—ã –æ—à–∏–±–æ–∫:**
- –û—à–∏–±–∫–∏ API –ë–∏—Ç—Ä–∏–∫—Å24 (–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å, —Ç–∞–π–º–∞—É—Ç—ã)
- –û—à–∏–±–∫–∏ –∑–∞–ø–∏—Å–∏ –≤ LocalStorage (–ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞, –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ)
- –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
–í—Å–µ –æ—à–∏–±–∫–∏ –¥–µ—Ç–∞–ª—å–Ω–æ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ PHP, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- PHP 7.4 –∏–ª–∏ –≤—ã—à–µ
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ `curl` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
- –ü—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `src/logs/` –∏ `src/data/`

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:**

```bash
# Linux/Mac
./install.sh

# Windows
install.bat
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
- –°–æ–∑–¥–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (`src/logs/`, `src/data/`)
- –°–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª—ã –¥–∞–Ω–Ω—ã—Ö —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞:
  - `contacts.json` - –∫–æ–Ω—Ç–∞–∫—Ç—ã —Å –õ–ö
  - `companies.json` - –∫–æ–º–ø–∞–Ω–∏–∏
  - `deals.json` - —Å–¥–µ–ª–∫–∏
  - `projects.json` - –ø—Ä–æ–µ–∫—Ç—ã (—Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å—ã)
  - `managers.json` - –º–µ–Ω–µ–¥–∂–µ—Ä—ã
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (666 –¥–ª—è —Ñ–∞–π–ª–æ–≤ –¥–∞–Ω–Ω—ã—Ö)
- –ö–æ–ø–∏—Ä—É–µ—Ç `.env.example` –≤ `.env` (–µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å PHP –∫–æ–¥–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ `.env`:**

```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω
cp env.example .env
```

**–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ `.env`:**

```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–∏—Ç—Ä–∏–∫—Å24
BITRIX24_WEBHOOK_URL=https://your-domain.bitrix24.ru/rest/1/your-webhook-token/
BITRIX24_WEBHOOK_SECRET=your-webhook-secret
BITRIX24_APPLICATION_TOKEN=your-application-token  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
BITRIX24_CLIENT_ID=your-client-id                   # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
BITRIX24_CLIENT_SECRET=your-client-secret           # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
BITRIX24_TIMEOUT=30                                 # –¢–∞–π–º–∞—É—Ç API –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å–µ–∫—É–Ω–¥—ã)

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
LOG_ENABLED=true
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:**

```bash
# Windows
install.bat

# Linux/Mac
./install.sh
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±—Ö—É–∫–æ–≤ –≤ –ë–∏—Ç—Ä–∏–∫—Å24

**–®–∞–≥–∏:**

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ë–∏—Ç—Ä–∏–∫—Å24: `–ù–∞—Å—Ç—Ä–æ–π–∫–∏ > –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ > –í–µ–±—Ö—É–∫–∏`
2. –°–æ–∑–¥–∞–π—Ç–µ –≤—Ö–æ–¥—è—â–∏–π –≤–µ–±—Ö—É–∫
3. –£–∫–∞–∂–∏—Ç–µ URL –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞: `https://your-domain.com/src/webhooks/bitrix24.php`
4. –í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:
   - ‚òë `ONCRMCONTACTUPDATE` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞
   - ‚òë `ONCRMCONTACTADD` - –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞
   - ‚òë `ONCRMCONTACTDELETE` - –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞
   - ‚òë `ONCRMCOMPANYUPDATE` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
   - ‚òë `ONCRMCOMPANYADD` - –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
   - ‚òë `ONCRMDEALUPDATE` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏
   - ‚òë `ONCRM_DYNAMIC_ITEM_UPDATE` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å–∞

5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤–µ–±—Ö—É–∫ –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ URL –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ `.env`

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∞–ø–ø–∏–Ω–≥–∞ –ø–æ–ª–µ–π

**–í–∞–∂–Ω–æ:** –ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π –≤ `src/config/bitrix24.php`.

**–ö–∞–∫ –Ω–∞–π—Ç–∏ –∫–æ–¥ –ø–æ–ª—è –≤ –ë–∏—Ç—Ä–∏–∫—Å24:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç –≤ –ë–∏—Ç—Ä–∏–∫—Å24
2. –í–∫–ª—é—á–∏—Ç–µ —Ä–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
3. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ API: `crm.contact.fields` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –ø–æ–ª–µ–π

**–ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

```php
'field_mapping' => [
    'contact' => [
        'lk_client_field' => 'UF_CRM_1763468430', // –ö–æ–¥ –ø–æ–ª—è "–õ–ö –∫–ª–∏–µ–Ω—Ç–∞"
        'lk_client_values' => ['46','3118','3120','3122'], // –î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
        'email' => 'EMAIL',
        'phone' => 'PHONE',
        'name' => 'NAME',
        'last_name' => 'LAST_NAME',
    ],
    'company' => [
        'title' => 'TITLE',
        'email' => 'EMAIL',
        'phone' => 'PHONE',
    ],
    'deal' => [
        'title' => 'TITLE',
        'stage_id' => 'STAGE_ID',
    ],
]
```

**–í–∞–∂–Ω–æ:**
- `lk_client_values` —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—Å—Å–∏–≤ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ–ª—è "–õ–ö –∫–ª–∏–µ–Ω—Ç–∞"
- –î–ª—è –∫–æ–º–ø–∞–Ω–∏–π –ø–æ–ª–µ `lk_client_field` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- API –∑–∞–ø—Ä–æ—Å—ã –ø–æ–ª—É—á–∞—é—Ç —Ç–æ–ª—å–∫–æ –ø–æ–ª—è, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ –º–∞–ø–ø–∏–Ω–≥–µ

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

```bash
# –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –∏ –ª–æ–≥–æ–≤
mkdir -p src/data src/logs

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å
chmod 755 src/data src/logs
chmod 644 src/data/*.json src/logs/*.log 2>/dev/null || true
```

---

## üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (`index.php`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –ë–∏—Ç—Ä–∏–∫—Å24.

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞
- –í—ã–±–æ—Ä –∫–æ–Ω—Ç–∞–∫—Ç–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–∞–∫—Ç–∞, –∫–æ–º–ø–∞–Ω–∏–∏ –∏ —Å–¥–µ–ª–æ–∫
- –ü–æ–∫–∞–∑ RAW JSON –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

**–î–æ—Å—Ç—É–ø:**
```
http://localhost:8000/
–∏–ª–∏
http://your-server-ip:8000/
```

### –î–∞—à–±–æ—Ä–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (`integration_dashboard.php`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å –ë–∏—Ç—Ä–∏–∫—Å24.

**–†–∞–∑–¥–µ–ª—ã:**

#### 1. –î–∞—à–±–æ—Ä–¥
- –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã (PHP –≤–µ—Ä—Å–∏—è, –≤–µ–±-—Å–µ—Ä–≤–µ—Ä, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª–æ–≥–æ–≤ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤, –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö

#### 2. –õ–æ–≥–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤
- –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –ª–æ–≥–æ–≤
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–∑–º–µ—Ä–µ –∏ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

#### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –§–æ—Ä–º–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö webhook –∑–∞–ø—Ä–æ—Å–æ–≤
- –í—ã–±–æ—Ä —Ç–∏–ø–∞ —Å–æ–±—ã—Ç–∏—è
- –í–≤–æ–¥ JSON –¥–∞–Ω–Ω—ã—Ö webhook
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π

#### 4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –°—Ç–∞—Ç—É—Å —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ webhook URL

**–î–æ—Å—Ç—É–ø:**
```
http://localhost:8000/integration_dashboard.php
```

### –ó–∞–ø—É—Å–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞

**–õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫:**

```bash
# –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
./start_server.sh

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ PHP
php -S 0.0.0.0:8000
```

**–î–æ—Å—Ç—É–ø –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏:**

–°–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç IP –∞–¥—Ä–µ—Å –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –µ–≥–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ:
```
–î–æ—Å—Ç—É–ø –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏: http://192.168.0.190:8000
```

---

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–æ–≤

**–§–æ—Ä–º–∞—Ç –∑–∞–ø–∏—Å–∏:**
```
[2025-01-18 14:30:00] INFO: Webhook received | Context: {"event":"ONCRMCONTACTUPDATE","contact_id":"12345"}
```

**–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**
- `DEBUG` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–∑–∞–ø—Ä–æ—Å—ã, –æ—Ç–≤–µ—Ç—ã API)
- `INFO` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (—É—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏)
- `WARNING` - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã)
- `ERROR` - –æ—à–∏–±–∫–∏ (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã)

### –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤

–õ–æ–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–æ—Ç–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ 10MB:
- –°—Ç–∞—Ä—ã–π –ª–æ–≥ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ—Ç—Å—è: `bitrix24_webhooks.log.2025-01-18_14-30-00.bak`
- –°–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π —Ñ–∞–π–ª –ª–æ–≥–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

**–ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ `integration_dashboard.php`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–õ–æ–≥–∏"
3. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ—Å–º–æ—Ç—Ä" –¥–ª—è –Ω—É–∂–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

**–ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É:**
```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫
tail -n 50 src/logs/bitrix24_webhooks.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep ERROR src/logs/bitrix24_webhooks.log

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f src/logs/bitrix24_webhooks.log
```

### –¢–∏–ø–∏—á–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –≤ –ª–æ–≥–∞—Ö

**–£—Å–ø–µ—à–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
```
[2025-01-18 14:30:00] INFO: === WEBHOOK REQUEST RECEIVED ===
[2025-01-18 14:30:01] INFO: === WEBHOOK DATA VALIDATED ===
[2025-01-18 14:30:02] INFO: === STARTING EVENT PROCESSING ===
[2025-01-18 14:30:03] INFO: Successfully retrieved entity data from Bitrix24 API
[2025-01-18 14:30:04] INFO: Contact data synced successfully
[2025-01-18 14:30:05] INFO: === EVENT PROCESSING COMPLETED SUCCESSFULLY ===
```

**–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
```
[2025-01-18 14:30:00] ERROR: Failed to get entity data from Bitrix24
[2025-01-18 14:30:01] INFO: Retrying after delay | attempt: 2, delay: 5
[2025-01-18 14:30:06] ERROR: === EVENT PROCESSING FAILED ===
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
- –í—Å–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (—Ç–æ–∫–µ–Ω—ã, –∫–ª—é—á–∏ API) —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `.env`
- –§–∞–π–ª `.env` –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è –≤ git (–¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–µ–±—Ö—É–∫–æ–≤

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
1. User-Agent –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å "Bitrix24"
2. Content-Type –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `application/json` –∏–ª–∏ `application/x-www-form-urlencoded`
3. –¢–æ–∫–µ–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω) –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å
4. JSON —Ñ–æ—Ä–º–∞—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–ß—Ç–æ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è:**
- IP –∞–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –≤–µ–±—Ö—É–∫–∞
- User-Agent –∑–∞–≥–æ–ª–æ–≤–æ–∫
- –†–∞–∑–º–µ—Ä —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–±–µ–∑ —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)

**–ß—Ç–æ –ù–ï –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è:**
- –ü–æ–ª–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã (—Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ 8 —Å–∏–º–≤–æ–ª–æ–≤)
- –ü–∞—Ä–æ–ª–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS** –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤–µ–±—Ö—É–∫–æ–≤
2. **–†–µ–≥—É–ª—è—Ä–Ω–æ –º–µ–Ω—è–π—Ç–µ API –∫–ª—é—á–∏** –∏ —Ç–æ–∫–µ–Ω—ã
3. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø** –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `src/logs/` –∏ `src/data/`
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall** –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫—É –≤–µ–±—Ö—É–∫–æ–≤
5. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏** –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

## üìà –ü—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –ë–∏—Ç—Ä–∏–∫—Å24

–°–æ–≥–ª–∞—Å–Ω–æ –ø–ª–∞–Ω—É –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (`docs/bitrix24_plan.txt`):

1. **–ó–∞–ø—Ä–æ—Å—ã –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –õ–ö** ‚Äî 7,5%
   - –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª—è "–õ–ö –∫–ª–∏–µ–Ω—Ç–∞"
   - –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –õ–ö
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

2. **–ü–æ–ª—É—á–µ–Ω–∏–µ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** ‚Äî 15%
   - –ü–µ—Ä–≤–∏—á–Ω–æ–µ –∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞, –∫–æ–º–ø–∞–Ω–∏–∏, –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∏ –ø—Ä–æ–µ–∫—Ç–æ–≤
   - –†–µ–∞–∫—Ü–∏—è –Ω–∞ –≤–µ–±—Ö—É–∫–∏ –∏ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
   - –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤, —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–π

3. **–°–æ–∑–¥–∞–Ω–∏–µ —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —á–µ—Ä–µ–∑ API** ‚Äî 5% (–≤–æ–∑–º–æ–∂–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤
   - –°–±–æ—Ä –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º
   - –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —á–µ—Ä–µ–∑ API

4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ –¥–ª—è email** ‚Äî 1%
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ email

5. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å —Å–∞–π—Ç–∞** ‚Äî 3%
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –≤ —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–µ–∫—Ç–æ–≤
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –ø—Ä–æ–µ–∫—Ç–æ–≤

**–ò—Ç–æ–≥–æ:** 31,5% —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ë–∏—Ç—Ä–∏–∫—Å24.

---

## üõ†Ô∏è –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞ —Å–æ–±—ã—Ç–∏—è

1. **–î–æ–±–∞–≤—å—Ç–µ —Å–æ–±—ã—Ç–∏–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
```php
// src/config/bitrix24.php
'enabled_events' => [
    // ...
    'ONCRMNEWEVENT', // –ù–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ
],
```

2. **–î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤ `bitrix24.php`:**
```php
function handleNewEvent($entityData, $localStorage, $logger, $config)
{
    // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
    return true;
}
```

3. **–î–æ–±–∞–≤—å—Ç–µ –º–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):**
```php
'field_mapping' => [
    'new_entity' => [
        'field1' => 'BITRIX_FIELD1',
        // ...
    ],
],
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ API –º–µ—Ç–æ–¥–∞

–í –∫–ª–∞—Å—Å–µ `Bitrix24API` –¥–æ–±–∞–≤—å—Ç–µ –º–µ—Ç–æ–¥:
```php
public function newApiMethod($params)
{
    return $this->makeApiCall('crm.new.method', $params);
}
```

### –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
- `handleContactUpdate()` - –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- `handleCompanyUpdate()` - –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–π
- `handleDealUpdate()` - –¥–ª—è —Å–¥–µ–ª–æ–∫
- `handleSmartProcessUpdate()` - –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: Webhook –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. URL –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ë–∏—Ç—Ä–∏–∫—Å24 –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
2. –°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS (–ë–∏—Ç—Ä–∏–∫—Å24 —Ç—Ä–µ–±—É–µ—Ç HTTPS)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–æ–±—ã—Ç–∏—è –≤—ã–±—Ä–∞–Ω—ã –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–µ–±—Ö—É–∫–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å URL —á–µ—Ä–µ–∑ curl: `curl -X POST https://your-domain.com/src/webhooks/bitrix24.php`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ `src/logs/bitrix24_webhooks.log`

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. User-Agent –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å–æ–¥–µ—Ä–∂–∏—Ç "Bitrix24"
2. Content-Type –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (application/json)
3. JSON —Ñ–æ—Ä–º–∞—Ç –≤–∞–ª–∏–¥–Ω—ã–π
4. –¢–æ–∫–µ–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω) –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

**–†–µ—à–µ–Ω–∏–µ:**
- –í–∫–ª—é—á–∏—Ç–µ DEBUG —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è: `LOG_LEVEL=DEBUG` –≤ `.env`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### –ü—Ä–æ–±–ª–µ–º–∞: API –æ—à–∏–±–∫–∏

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. Webhook URL –≤ –∫–æ–Ω—Ñ–∏–≥–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
2. API —Ç–æ–∫–µ–Ω –ë–∏—Ç—Ä–∏–∫—Å24 –≤–∞–ª–∏–¥–Ω—ã–π –∏ –Ω–µ –∏—Å—Ç–µ–∫
3. –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ —É —Ç–æ–∫–µ–Ω–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–µ
4. –¢–∞–π–º–∞—É—Ç—ã –Ω–µ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–µ

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API: `curl https://your-domain.bitrix24.ru/rest/1/your-token/crm.contact.get?id=1`
- –£–≤–µ–ª–∏—á—å—Ç–µ —Ç–∞–π–º–∞—É—Ç: `BITRIX24_TIMEOUT=60` –≤ `.env`

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –ü—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `src/data/`
2. –ú–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ
3. JSON —Ñ–∞–π–ª—ã –Ω–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω—ã

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞
ls -la src/data/

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞
chmod 755 src/data
chmod 644 src/data/*.json

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ
df -h
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ë–∏—Ç—Ä–∏–∫—Å24 REST API:** https://dev.1c-bitrix.ru/rest_help/
- **–í–µ–±—Ö—É–∫–∏ –ë–∏—Ç—Ä–∏–∫—Å24:** https://dev.1c-bitrix.ru/rest_help/general/webhooks.php
- **–õ–æ–≥–∏ –ø—Ä–æ–µ–∫—Ç–∞:** `src/logs/bitrix24_webhooks.log`
- **–ü–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:** `docs/bitrix24_plan.txt`

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.1
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-19
